#!/bin/bash

# rm -fr ./testcases/in
# rm -fr ./testcases/out
# mkdir ./testcases/in
# mkdir ./testcases/out

M=(
    # T MAX_N MAX_X

    "1 10 10"
    "1 10 10"
    "1 10 10"
    "1 10 10"
    "1 10 10"

    "1 10 10"
    "1 50 10"
    "1 100 10"
    "1 500 10"
    "1 1000 10"
    "1 3000 10"

    "100 30 30"
    "1000 30 30"
    "10000 30 30"

    "1 10 10"
    "1 10 50"
    "1 10 100"
    "1 10 500"
    "1 10 1000"
    "1 10 3000"

    "1 100 100"
    "1 500 500"
    "1 1000 1000"
    "1 3000 3000"

    "10 100 100"
    "10 500 500"
    "10 1000 1000"
    "10 3000 3000"

    "30 100 100"
    "30 500 500"
    "30 1000 1000"
    "30 3000 3000"

    "500 100 100"
    "500 500 500"
    "500 1000 1000"
    "500 3000 3000"

    "1000 100 100"
    "1000 500 500"
    "1000 1000 1000"
    "1000 3000 3000"

    "8000 100 100"
    "8000 500 500"
    "8000 1000 1000"
    "8000 3000 3000"

    "10000 100 100"
    "10000 500 500"
    "10000 1000 1000"
    "10000 3000 3000"

    "10000 3000 3000"
    "10000 3000 3000"
    "10000 3000 3000"
    "10000 3000 3000"
    "10000 3000 3000"
    "10000 3000 3000"
    "10000 3000 3000"
)
# N=${#M[@]};

i=1;
for m in "${M[@]}"; do
    j="$i"
    if [ $j -lt 10 ]; then
        j="0$j"
    fi

    tmpfile1=$(mktemp --tmpdir=.)
    echo "testcase-$j $m" > "$tmpfile1";
    ./generator.exe < "$tmpfile1";
    rm "$tmpfile1"

    i=$((i + 1))
    echo $j;
done

./call_verifier.sh
./call_solver.sh ./solver.exe
